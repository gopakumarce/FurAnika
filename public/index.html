<html>
<head>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #F0F0F0;
    }
  </style>
  <script src="https://cdn.firebase.com/js/client/2.2.1/firebase.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
  <script src="konva.min.js"></script>
</head>

<body>

<div id='container'></div>

<script>

  var width = window.innerWidth;
  var height = window.innerHeight;

  /*
   * The actual play baord related parameters. The board is a 7-column
   * 6-row board
   */
  var boardTop = 4; // Start 4 pixels from top
  var boardLeft = 4;  // Start 4 pixels from left
  var boardWidth = Math.floor((width * 3)/4) - boardLeft; // Use 3/4th of the screen for board
  var boardHeight = height - 2*boardTop; //Leave space at top and bottom
  var boardCellWide = Math.floor(boardWidth/7); // 7 cells wide
  var boardCellHigh = Math.floor(boardHeight/6);  // 6 cells high
  var boardCell = Math.min(boardCellWide,boardCellHigh)

  var imageObj = new Image();
  
  var stage = new Konva.Stage({
    container: 'container',
    width: width,
    height: height
  });

  var layer = new Konva.Layer();

  /*
  * create a group which will be used to combine
  * multiple simple shapes.  Transforming the group will
  * transform all of the simple shapes together as
  * one unit
  */
  var group = new Konva.Group({
      x: boardLeft,
      y: boardTop,
      rotation: 0
  });

  var images = [
                ['yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg'], 
                ['yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg'], 
                ['yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg'], 
                ['yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg'], 
                ['yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg'], 
                ['yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg', 'yoda.jpg']
               ]                


  var imageObjs = [];

  function cellImage(row, column) {
      var cell = new Konva.Image({
          x: boardLeft + (column * boardCell),
          y: boardTop + (row * boardCell),
          image: imageObjs[row][column],
          width: boardCell,
          height: boardCell
      });
      group.add(cell);
      cell.draw();
  }

  for(var row = 0; row < 6; row++) {
      imageObjs[row] = [];
      for(var column = 0; column < 7; column++) {
          cellImageSpecific = cellImage.bind(null, row, column)
          imageObjs[row][column] = new Image();
          imageObjs[row][column].onload = cellImageSpecific;
          imageObjs[row][column].src = images[row][column];
          if (imageObjs[row][column].complete) {
              $(imageObjs[row][column]).load()
          }
        }
  }
 
  layer.add(group);
  stage.add(layer);


</script>
</body>
</html>
